<!DOCTYPE html>
<html xmlns:th=http://www.thymeleaf.org>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>IMJANGDAN</title>

    <link th:href="@{/css/memomap.css}" rel="stylesheet">

    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</head>
<body>

<!--<h1>땅판소년단 임장단 메인 페이지입니다.</h1>-->

<!-- A grey horizontal navbar that becomes vertical on small screens -->
<nav class="navbar navbar-expand-sm navbar-dark bg-dark">
    <div class="container-fluid container-xxl">
        <a class="navbar-brand" href="javascript:void(0)">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-fill" viewBox="0 0 16 16">
                <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z"/>
                <path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z"/>
            </svg>
            IMJANGDAN
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mynavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mynavbar">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/homememo">메모</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/news">뉴스</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/bbslist">커뮤니티</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/reagents">공인중개사</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/financing">파이낸싱</a>
                </li>
            </ul>
<!--            <form class="d-flex">-->
<!--                <input class="form-control me-2" type="text" placeholder="Search">-->
<!--                <button class="btn btn-primary" type="button">Search</button>-->
<!--            </form>-->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="/login">로그인</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/join">회원가입</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!--<div class="searchBox"></div>-->

<!--<div id="map" class="mapBox"></div>-->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=0aca019ed744ce53b052c556e44d8239"></script>

<script type="text/javascript" th:src="@{/js/memomap.js}"></script>
<div id="map" class="mapBox" ></div>
<script>
    function addButtonClick() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;

                // 카카오 맵스의 LatLng 객체 생성
                const latlng = new kakao.maps.LatLng(latitude, longitude);

                // 예를 들어 이 좌표를 사용해 맵 중심을 변경하거나, 마커를 추가할 수 있음
                // map.setCenter(latlng);
                // new kakao.maps.Marker({ position: latlng, map: map });

                // 혹은 이 좌표를 다른 서버 API로 전송하거나 다른 페이지로 리디렉션할 때 사용
                window.location.href = `http://localhost:3000/homememo?lat=${latitude}&lng=${longitude}`;
            }, function(error) {
                alert("위치 정보를 가져올 수 없습니다: " + error.message);
                window.location.href = 'http://localhost:3000/homememo'; // 위치 정보 없이 리디렉션
            });
        } else {
            alert("Geolocation is not supported by this browser.");
        }
    }

    var mapContainer = document.getElementById('map'), // 지도를 표시할 div
        mapOption = {
            center: new kakao.maps.LatLng(37.54699, 127.09598), // 지도의 중심좌표
            level: 4 // 지도의 확대 레벨
        };

    var map = new kakao.maps.Map(mapContainer, mapOption);

    var imageSrc = 'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png', // 마커이미지의 주소입니다
        imageSize = new kakao.maps.Size(64, 69), // 마커이미지의 크기입니다
        imageOption = {offset: new kakao.maps.Point(27, 69)}; // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 이미지 안에서의 좌표를 설정합니다.

    // 마커의 이미지정보를 가지고 있는 마커이미지를 생성합니다
    var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
        markerPosition = new kakao.maps.LatLng(37.54699, 127.09598); // 마커가 표시될 위치입니다

    // 마커를 생성합니다
    var marker = new kakao.maps.Marker({
        position: markerPosition,
        image: markerImage // 마커이미지 설정
    });

    // 마커가 지도 위에 표시되도록 설정합니다
    marker.setMap(map);

    // 커스텀 오버레이에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
    var content = '<div class="customoverlay">' +
        '  <a href="https://map.kakao.com/link/map/11394059" target="_blank">' +
        '    <span class="title">구의야구공원</span>' +
        '  </a>' +
        '</div>';

    // 커스텀 오버레이가 표시될 위치입니다
    var position = new kakao.maps.LatLng(37.54699, 127.09598);

    // 커스텀 오버레이를 생성합니다
    var customOverlay = new kakao.maps.CustomOverlay({
        map: map,
        position: position,
        content: content,
        yAnchor: 1
    });


    // 마커를 표시할 위치와 title 객체 배열입니다
    var positions = [
        {
            title: '재한몽골학교',
            latlng: new kakao.maps.LatLng(37.34699, 127.09598)
        },
        {
            title: '래미안파크스위트아파트',
            latlng: new kakao.maps.LatLng(37.519, 127.01287)
        },
        {
            title: '대한예수교장로회성동교회',
            latlng: new kakao.maps.LatLng(37.5499, 127.09518)
        },
        {
            title: '광진파크프라이빗아파트',
            latlng: new kakao.maps.LatLng(37.54299, 127.06598)
        }
    ];
    // 마커 이미지의 이미지 주소입니다
    var imageSrc = "/images/memo-icon.png";

    for (var i = 0; i < positions.length; i++) {
        // 마커 이미지의 이미지 크기입니다
        var imageSize = new kakao.maps.Size(35, 40);
        // 마커 이미지를 생성합니다
        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);
        // 마커를 생성합니다
        var marker = new kakao.maps.Marker({
            map: map, // 마커를 표시할 지도
            position: positions[i].latlng, // 마커를 표시할 위치
            title: positions[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
            image: markerImage // 마커 이미지
        });
    }


</script>
<button class="add-button" onclick="addButtonClick()">+</button>

</body>
</html>
<style>
    .add-button {
        position: fixed;
        left: 20px;
        bottom: 20px;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: #007bff; /* Bootstrap primary color */
        color: white;
        font-size: 24px;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        z-index: 1000;
    }
</style>



